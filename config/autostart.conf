# ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
# ┃                    Hyprland Autostart                      ┃
# ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛

# Quickshell instances - started via XDG autostart for proper session management
# Note: Tray apps must start BEFORE Quickshell for SystemTray.items to detect them
# - Overview: ~/.config/autostart/quickshell-overview.desktop
# - Waybar: ~/.config/autostart/quickshell-waybar.desktop
# UWSM handles timing automatically, no need for sleep delays or exec-once

# REMOVED: Quickshell waybar now started ONLY via XDG autostart (was causing duplicate instances)
# REMOVED: swaybg now started ONLY via XDG autostart (was causing duplicates)

# Start applications that don't have XDG autostart desktop files
# Most apps are now handled by XDG autostart in ~/.config/autostart/

# Start Pyprland daemon for scratchpads
exec-once = pypr

# Preload file manager backend services for faster pcmanfm-qt startup
exec-once = gio mount -l 2>/dev/null

# Run pcmanfm-qt in daemon mode for instant file manager access
exec-once = pcmanfm-qt --daemon-mode

# Session restore (disabled by default)
# exec-once = bash -c '[ -f "$HOME/.config/hypr/saved-sessions/auto-logout.json" ] && (sleep 3 && SESSION_FILE="$HOME/.config/hypr/saved-sessions/auto-logout.json" ~/.config/hypr/scripts/restore-session.sh)'

# Note: uwsm finalize is now handled automatically by uwsm session management
# Manual finalization removed to prevent conflicts with uwsm's automatic handling
